{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","searchKey","setSearchKey","value","onChange","event","console","log","target","PersonForm","props","newName","setNewName","number","setNumber","addName","onSubmit","type","Persons","persons","delPerson","map","p","name","toLowerCase","indexOf","key","onClick","baseUrl","axios","get","then","response","data","newObj","post","id","delete","put","Notification","message","color","NotifyStyle","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","setPersons","setMessage","errorMessage","setErrorMessage","useEffect","personService","showMessage","m","setTimeout","showErrorMessage","preventDefault","person2add","repeatName","find","undefined","window","confirm","catch","e","error","filter","alert","concat","person","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f6e7ae95.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({searchKey, setSearchKey}) => {\r\n\r\n    \r\n    const handleSearchOnChange = (event) => {\r\n        console.log(event.target.value)\r\n        setSearchKey(event.target.value)\r\n    }\r\n    \r\n    return (\r\n        <div>filter shown with  \r\n            <input value={searchKey} \r\n                onChange={handleSearchOnChange}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm = (props) => {\r\n\r\n    const { newName, setNewName,\r\n        number, setNumber, addName } = props\r\n\r\n    const handleNameOnChange = (event) => {\r\n        // console.log(event.target.value)\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handleNumberOnChange = (event) => {\r\n        // console.log(event.target.value)\r\n        setNumber(event.target.value)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form onSubmit={addName}>\r\n                <div>\r\n                    name: <input value={newName}\r\n                        onChange={handleNameOnChange} /></div>\r\n                <div>number: <input value={number}\r\n                    onChange={handleNumberOnChange} /></div>\r\n                <div>\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Persons = ({ persons, searchKey, delPerson }) => {\r\n    return (\r\n        <div>\r\n            {persons.map(p => {\r\n                if (p.name.toLowerCase().indexOf(searchKey) !== -1) {\r\n                    return (\r\n                        <div key={p.name}>{p.name} {p.number}\r\n                            <button onClick={() => delPerson(p)}>delete</button>\r\n                        </div>\r\n                    )\r\n                } else return null\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Persons;","import axios from 'axios';\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () =>\r\n    axios.get(baseUrl)\r\n        .then(response => response.data)\r\n\r\nconst addPerson = newObj =>\r\n    axios.post(baseUrl, newObj)\r\n        .then(response => response.data)\r\n\r\nconst updatePerson = (id, newObj) =>\r\n    axios.put(`${baseUrl}/${id}`, newObj)\r\n        .then(response => response.data)\r\n\r\nconst deletePerson = id =>\r\n    axios.delete(`${baseUrl}/${id}`)\r\n        .then(response => response.data)\r\n\r\nexport default { getAll, addPerson, deletePerson, updatePerson }","import React from 'react';\r\n\r\nconst Notification = ({ message, color}) => {\r\n    if (message === null) {\r\n        return null;\r\n    }\r\n    const NotifyStyle = {\r\n        color: color,\r\n        background: 'lightgrey',\r\n        fontSize: 20,\r\n        borderStyle: 'solid',\r\n        borderRadius: 5,\r\n        padding: 10,\r\n        marginBottom: 10,\r\n    }\r\n\r\n    return (\r\n        <div style={NotifyStyle}>\r\n            {message}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Notification;","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\n\nconst App = (props) => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [number, setNumber] = useState('')\n  const [searchKey, setSearchKey] = useState('')\n  const [message, setMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    console.log('effect...')\n    personService.getAll()\n      .then(data => setPersons(data))\n  }, [])\n\n  const addName = (event) => {\n    event.preventDefault()\n    const person2add = {\n      name: newName,\n      number: number\n    }\n    // check if name already excist\n    let repeatName = persons.find(p => p.name === newName)\n    if (repeatName !== undefined) {\n      console.log('find a name repeat')\n      if (window.confirm(`${repeatName.name} is already added to phonebook, replace the old numberwith a new one?`)) {\n        console.log('update person number');\n        personService\n          .updatePerson(repeatName.id, person2add)\n          .then(data => {\n            setPersons(persons.map(p => p.id === data.id\n              ? data : p))\n            // notify user\n            showMessage(`Update ${repeatName.name}'s phone number success.`)\n          })\n          .catch(e => {\n            console.log('error:', e.response.data)\n            // showErrorMessage(`Information of ${repeatName.name} has already been removed from server`)\n            showErrorMessage(e.response.data.error)\n            setPersons(persons.filter(p => p.name !== repeatName.name))\n          })\n      }\n      return\n    }\n    // check phone number exsist\n    if (persons.find(p => p.number === number) !== undefined) {\n      console.log('find a number repeat')\n      alert(`${number} is already added to phonebook`)\n      return\n    }\n    // add into persons\n    // upload to back-end\n    personService.addPerson(person2add)\n      .then(data => {\n        // console.log('response data:',data);\n        setPersons(persons.concat(data));\n        showMessage(`Added ${person2add.name}`)\n      })\n      .catch(e => { \n        console.log('error:', e.response.data)\n        showErrorMessage(e.response.data.error)\n     })\n  }\n\n  const delPerson = person => {\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      personService.deletePerson(person.id)\n        .then(data => {\n          setPersons(persons.filter(p => p.id !== person.id))\n          showMessage(`${person.name} has been deleted`)\n        })\n        .catch(e => console.log('error:', e))\n    }\n  }\n\n  const showMessage = m => {\n    setMessage(m)\n    setTimeout(() => { setMessage(null) }, 5000)\n  }\n\n  const showErrorMessage = m => {\n    setErrorMessage(m)\n    setTimeout(() => { setErrorMessage(null) }, 5000)\n  }\n\n  return (\n    <>\n      <h2>Phonebook</h2>\n\n      <Notification message={message} color='green' />\n      <Notification message={errorMessage} color='red' />\n\n      <Filter searchKey={searchKey} setSearchKey={setSearchKey} />\n\n      <h3>add a new ppl</h3>\n\n      <PersonForm addName={addName}\n        number={number} setNumber={setNumber}\n        newName={newName} setNewName={setNewName} />\n\n      <h2>Numbers</h2>\n      <Persons persons={persons} searchKey={searchKey}\n        delPerson={delPerson} />\n    </>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}